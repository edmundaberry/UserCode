import FWCore.ParameterSet.Config as cms

process = cms.Process("MyHcalDigiAnalyzer")
process.load('FWCore/MessageService/MessageLogger_cfi')
process.load("Configuration.StandardSequences.Services_cff")
process.load("Configuration.EventContent.EventContent_cff")

##-----------------------------------------------
## Input number of events 
##-----------------------------------------------

process.maxEvents = cms.untracked.PSet(
    input = cms.untracked.int32(-1)
)

##-----------------------------------------------
## Input Global Tag
##-----------------------------------------------

process.load("Configuration.StandardSequences.Geometry_cff")
process.load("Configuration.StandardSequences.FrontierConditions_GlobalTag_cff")
process.GlobalTag.globaltag = 'STARTUP_30X::All'

##-----------------------------------------------
## Source goes here.  
##-----------------------------------------------

process.source = cms.Source("PoolSource",
    skipEvents = cms.untracked.uint32(0),    
    fileNames = cms.untracked.vstring(
	'file:///uscms/home/eberry/mikeh_data/promptRecoHCalNoise.root'
    )
)

##-----------------------------------------------
## Unpack the digis
##-----------------------------------------------

process.load("Configuration.StandardSequences.RawToDigi_Data_cff")
process.unpack = cms.Path(process.RawToDigi)

##-----------------------------------------------
## Declare analyzer objects for each DataFrame type
##-----------------------------------------------

process.hbDigiAnalyzer          = cms.EDAnalyzer("HBHEDigiAnalyzer", 
	hcalDigiTag             = cms.untracked.InputTag ("hcalDigis"),
	caloTowerTag            = cms.untracked.InputTag ("towerMaker"),
	hcalTrigPrimTag         = cms.untracked.InputTag ("simHcalTriggerPrimitiveDigis"),
	outPath                 = cms.untracked.string   ("/uscms/home/eberry/data/"),
	outSuffix               = cms.untracked.string   ("_data"),
	subdetName              = cms.untracked.string   ("HB"),
	useEventList            = cms.untracked.bool     (True)
)			        
				    
process.heDigiAnalyzer          = cms.EDAnalyzer("HBHEDigiAnalyzer",		
	hcalDigiTag             = cms.untracked.InputTag ("hcalDigis"),
	caloTowerTag            = cms.untracked.InputTag ("towerMaker"),
	hcalTrigPrimTag         = cms.untracked.InputTag ("simHcalTriggerPrimitiveDigis"),
	outPath                 = cms.untracked.string   ("/uscms/home/eberry/data/"),
	outSuffix               = cms.untracked.string   ("_data"),
	subdetName              = cms.untracked.string   ("HE"),
	useEventList            = cms.untracked.bool     (True)
)			        
			        
process.hoDigiAnalyzer          = cms.EDAnalyzer("HODigiAnalyzer",
	hcalDigiTag             = cms.untracked.InputTag ("hcalDigis"),
	caloTowerTag            = cms.untracked.InputTag ("towerMaker"),
	hcalTrigPrimTag         = cms.untracked.InputTag ("simHcalTriggerPrimitiveDigis"),
	outPath                 = cms.untracked.string   ("/uscms/home/eberry/data/"),
	outSuffix               = cms.untracked.string   ("_data"),
	subdetName              = cms.untracked.string   ("HO"),
	useEventList            = cms.untracked.bool     (True)
)			        
			        
process.hfDigiAnalyzer          = cms.EDAnalyzer("HFDigiAnalyzer",
	hcalDigiTag             = cms.untracked.InputTag ("hcalDigis"),
	caloTowerTag            = cms.untracked.InputTag ("towerMaker"),
	hcalTrigPrimTag         = cms.untracked.InputTag ("simHcalTriggerPrimitiveDigis"),
	outPath                 = cms.untracked.string   ("/uscms/home/eberry/data/"),
	outSuffix               = cms.untracked.string   ("_data"),
	subdetName              = cms.untracked.string   ("HF"),
        useEventList            = cms.untracked.bool     (True),
	doRecHitPulseCorrection = cms.untracked.bool     (False)
)


process.analyze = cms.Path(
		  process.hbDigiAnalyzer
		* process.heDigiAnalyzer
	        * process.hoDigiAnalyzer
		* process.hfDigiAnalyzer
		)

process.schedule = cms.Schedule()
process.schedule.append(process.unpack )
process.schedule.append(process.analyze)

